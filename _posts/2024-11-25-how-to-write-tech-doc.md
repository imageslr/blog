---
layout: post
title: 如何写好技术文档
date: 2024/11/25 00:00
typora-root-url: ../
typora-copy-images-to: ../media/how-to-write
---



# 〇、前言

这篇文章，我们讨论程序员如何写好技术文档。

写好文档，好处不言而喻。以我自己为例，这篇博客是我在找实习时创建的，最开始是为了记录一些题解，方便后续复习。但这篇博客被我当时的面试官意外看到了，我们围绕博客里的内容做了很多讨论，最终我拿到了这个实习 offer，并一直留在了这个团队。虽然文档不是面试通过的主要原因，但文档风格确实会影响读者对你的第一印象。现在我在面试候选人时，如果对方附上了博客链接，我也一定会点进去看一看。

对于程序员来说，写文档和写代码同等重要。在多团队、多业务的工作模式下，文档是重要的信息传递工具，清晰的文档能降低理解和沟通成本，提高效率。一个反直觉的事实是，我工作后的大部分时间是在写文档，几乎和写代码 / Debug 的时间持平。这些文档既包括方案设计、上线评审、测试报告、团队分享等技术体裁，也包括日报、周报、晋升答辩等述职场景。

然而，技术文档的写作难点在于：相比于律师 / 财务等职业的文档，技术文档话题多样，很难用统一的标准与框架来约束。因此，技术文档的好坏和文笔无关，和思维有关。

在这篇文章中，我总结了自己写技术文档的一些通用思维。除了抽象的思维和方法论，本文也会介绍具体写作过程中的流程 (收集资料 -> 思维导图 -> 文档) 与技巧 (样式、绘图与工具)。欢迎大家交流讨论。





# 一、方法论

## 1.1 明确受众和目标

这里我们只讨论要被传播给他人的文档。如果文档只有自己看，那么只要自己能看懂就可以。但如果文档会被传播，那么必须要明确受众和目标是什么。

文档本质上是一个信息传递的载体。作为文档的作者，我们必须明确自己的目标，即我们想表达什么，并且希望读者能理解什么。我们还需要明确受众是谁，即受众具有哪些知识背景和上下文、他们希望通过这篇文档获取什么信息。

> 信息源、载体、接收方，这些是信息传递的基本要素。

受众和目标需要视情况讨论。某些场景下，先确定目标，再选择受众：比如目标是“希望通过一系列分享，提升团队的影响力”，那么受众就可以是“整个部门的所有研发人员”。而某些场景下，受众和目标是预设的，比如周报的受众是“团队成员与合作部门”，目标则是“让其他成员能充分理解自己当前的工作，并深度参与讨论”。

目标和受众共同影响着文档的内容与表达方式。这里没有标准的执行流程，但可以举些例子：

* **周报**：周报的受众主要是其他团队成员，目标是把自己的工作讲明白，并让其他人能充分理解，以便参与讨论。因此，如果是小范围的周会（比如四五个人，一个小方向），大家日常合作紧密，对其他人的工作都大致了解，那么内容就可以相对简洁。如果是大范围的周会（比如团队周会，二三十人），不同方向工作比较独立，大家互不了解上下文，那么内容就要相对详实。除此之外，还要考虑到周报本身的时间与篇幅限制，因此不能一股脑地把背景、经过和结果都完整贴在周报上，更好的方式是在周报上写一行摘要 (比如需求标题)，给出可量化的结果 (比如收入 +1%、单测覆盖率提升 5%)、并附上相关的索引 (比如 Merge Request 链接、截图、文档链接等)，感兴趣的读者自然会沿着这些索引继续阅读。
* **方案评审：**方案设计的目标是让受众认可这套方案，并允许执行。受众可以分为技术评审和业务方。如果是技术评审，这部分人员更关注可行性，也具有技术背景。因此我们在写文档时，可以：
  * 首先介绍这套方案的背景，比如需求背景，或者系统瓶颈)。并不是每位读者都熟悉这个系统，因此背景介绍不可或缺。但也不需要太长，只需要体现重点部分，并附上相关文档链接。
  * 其次介绍方案的概要设计方案。这部分的目标是在读者脑海中建立新方案的整体框架，因此这部分适合多画图、少文字、通过图片和颜色作对比。原则上，能用图说明的都应该用图，需要精确表达的再用文字。一般来说，方案评审的读者最关心的章节就在这里，我们必须作出这个预判。
  * 之后展开讨论方案的详细实现。这部分的目标是论证方案的可行性，因此这里需要详细描述方案的实现过程，最好配合伪代码，或其他系统中已有的实现。可以判断的是，大部分读者在阅读过程中，并不会详细看这部分内容；但当他们对概要设计中的某个环节有疑问时，一定会来这里找答案，所以这个章节的内容顺序最好和概要设计里相对应，甚至可以在概要设计章节里，通过超链接引导读者跳转到这里。
  * 最后总结预期收益和排期。这也是对方案可行性和改造必要性的补充说明。

* **上线评审：**和方案设计不同，上线评审环节已经到了验收成果的阶段，其目标是展示工作的成果、体现收益、并争取上线。因此，这篇文档可以这么写：
  * 背景部分，简单引用需求背景、方案的概要设计。我们可以假设读者已经了解相关背景，即使不了解，也可以去阅读引用的文档。
  * 实现细节，罗列这项工作做了哪些改造，交付了哪些成果。一般来说，这里可以有前端的界面展示、后端架构图、Merge Request 链接等。对读者来说，这个章节的价值是 (1) 体现了完成度和工作质量；(2) 作为后续类似工作的参考资料。
  * 指标部分，这是读者重点评审的部分，需要详细罗列指标。尽量多站在读者的角度思考，优化自己的表达，比如：
    * “接口延时降低 5s”，vs “接口延时降低 50% (10s -> 5s)“，显然，后者的信息量更大。更进一步的，”接口 p99 延时降低 50% (10s -> 5s)，错误率 2% 降低至 0.1%，达到 SLO 999 标准”，这个是不是更具有说服力？
    * “修复了一个 bug，收入 +10%”。诚然，收入增加很显著，但读者更关心你修复了什么 bug，为什么这个 bug 会产生这么明显的影响。如果不详细解释这个 bug 的细节，评审人员还有可能会质疑你是不是在系统中引入了新的 bug。因此，这里最好写成“修复了浮点数被意外转成整数，导致精度丢失的 bug，收入 +10%”，并在下文附上具体的代码位置、修改的 code diff、以及完整的 AB 实验报告和反转实验报告。

  * 上线方案，这部分的目标是确保上线是稳定可靠的，因此要有具体的放量流程、回滚预案和 DDL。

* **内部分享**：技术团队内部经常会组织各种分享，这个场景下明确受众和目标尤为重要。如果受众是日常紧密合作的同事，目标是提高合作效率，那么我们可以假设读者已经有了大部分背景知识，内容就可以更深入，跳过简单的术语介绍。如果受众是新入职的员工、或者全公司范围的分享，那么最好假设读者没有相关背景，要为文章中出现的各种术语和缩写补充解释，这样阅读起来就会非常舒畅。
  * 我经常会写一些面向新人的系统串讲文档。我的技巧是：如果这个系统非常复杂，那么我会先用简单的例子来解释术语，再用一些具体需求引申出系统里的功能点，最后把这些内容串起来就有了系统的整体架构。在此基础上，再围绕系统某个模块做深入剖析，读者就很容易理解。

* **晋升文档**：晋升文档可以认为是以上几种文档的结合，既要像周报一样列举自己这段时间做了什么，又要体现出其中的核心设计和关键成果，同时对于跨团队的评委，还要补充这些工作的背景。诚然，根据 [STAR 法则](https://baike.baidu.com/item/STAR%E5%8E%9F%E5%88%99/9889036)可以很容易写出一篇结构化的文档，但如果想抓住评委的眼睛，必须站在受众的视角，思考对方希望听到什么，对方会认可哪些工作。同时，想想自己想表达什么，哪些内容是自己最希望强调的？带着这些问题，再回过头来审视自己的文档，是否有些内容可以删除？是否要把重点内容放到前面？是否应该补充关键的指标？是否过于口语化？是否假设听众有相关背景？这么写出来对方能理解吗？等等。站在受众和目标的视角来写晋升文档，可以避免常见的误区：罗列工作，列了七八个章节，但找不到重点。



总结：

* 站在自身的角度，思考我们想表达什么；站在受众的角度，思考他们想要什么信息。
* 预判读者的需求，补充必要的背景知识，删除与主旨无关的内容，提供进一步阅读的链接。
* 以“信息传递”为宗旨，而不是简单地套用模板，写作和阅读都更加自然。



## 1.2 提高信息量
{: #entropy}

增加信息的有效内容和价值。
* 新信息
* 准确度，可量化，对比的数字
* 关联性，索引
* 减少冗余，提高信息密度

举例：
"天气热" → "今天上海中午气温35℃，比昨天上升2℃，建议做好防暑准备"


信息量

信息密度





* 还是要对齐到受众和目标

- 解决他们的什么问题

- 传递什么信息

  - 你想传递什么信息

  - 想好读者预期从你这里获取什么

    - 周报是一个信息传递的场景。同样需要想明白受众是谁，他们想获取什么信息。

    - 嘉瑞例子：写查core，不写咋查的。写自己学了什么，有啥用？

- 你可以假设读者知道这些内容，但如果他们不知道，你应该要有个链接兜底



目录的信息量





原子

- 写原子的内容，每个小目录可以独立分享出去

  - 标题上的最末尾的一节内容，只讲一件事

  - 可复用



详略结合，结论先行

* 问题排查的细节，是不是可以放到附录？
* 如果你的doc本身是一个复杂的问题排查，那么细节必须平铺直叙



准备一些通用的框架，但其实不重要

* 循序渐进，假设读者并不知道要什么
* 总分



一篇文档像一幅画，一面墙，要反复刷几次。

越长的文档越要刷



定期审阅



举一些例子







# 二、实操技巧

## 工具

Markdown

编辑器



锚点



快捷键：

* ctrl + A 等，放到附录了



## 样式与排版

锦上添花

不要把太多时间投入在样式平铺上，样式为内容服务



不同的排版元素：

* 引用
* 表格
* 高亮块



## 文档内容

收件箱

整理

思维导图



## 结构

结构化写作

也可以是原子化写作



总结？



## 配图

多画图





## 不同场景的文档举例

周报

Launch Review

