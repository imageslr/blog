---
layout: post
title: ğŸ“ã€LeetCodeã€‘84 æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢
date: 2020/2/2 21:00
---

è¿™é“é¢˜æ˜¯ [LeetCode 84 é¢˜](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)ã€‚

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1ã€‚æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

## è§£æ³•ä¸€ï¼šæš´åŠ›ï¼ˆéå†ä¸åŒçš„é«˜åº¦ï¼‰
éå†æ¯ä¸ªé«˜åº¦ï¼Œè®¡ç®—è¯¥é«˜åº¦ä¸‹çš„æœ€å¤§çš„**è¿ç»­çŸ©å½¢é¢ç§¯**ã€‚å¤–å±‚å¾ªç¯éå†æ¯ä¸ªé«˜åº¦ï¼Œå†…å±‚å¾ªç¯ä»å¤´åˆ°å°¾éå†æ•´ä¸ªæ•°ç»„å³å¯ã€‚ä½¿ç”¨ä¸€ä¸ª HashMap è®°å½•å·²ç»è®¡ç®—è¿‡çš„é«˜åº¦ï¼Œä¸é‡å¤è®¡ç®—ã€‚

è¿™ç§æ–¹æ³•ç›¸å½“äºä½¿ç”¨ä¸€æ ¹ä»ä¸‹åˆ°ä¸Šã€é€æ¸å‡é«˜çš„æ°´å¹³çº¿ï¼Œæˆªå»æ°´å¹³çº¿ä¸Šæ–¹çš„éƒ¨åˆ†ï¼Œç»Ÿè®¡æ°´å¹³çº¿ä¸‹æ–¹çš„**è¿ç»­çŸ©å½¢é¢ç§¯**ã€‚  
![-w239](/media/15806553167269.jpg)


æ—¶é—´å¤æ‚åº¦ $O(n^2)$ã€‚  
ç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚

ä»£ç ï¼š
```go
func largestRectangleArea(heights []int) int {
	res := 0
	set := map[int]bool{}
	for _, curHeight := range heights {
		if _, ok := set[curHeight]; ok {
			continue
		}
		set[curHeight] = true
		preIndex := -1 // å‰ä¸€ä¸ªé«˜åº¦å°äºå½“å‰æŸ±é«˜ curHeight çš„æŸ±å­ä¸‹æ ‡
		for i, h := range heights {
			if h < curHeight {
				// åœ¨æ­¤æ—¶ï¼Œi æ˜¯ä¸‹ä¸€ä¸ªé«˜åº¦å°äºå½“å‰æŸ±é«˜çš„æŸ±å­ä¸‹æ ‡
				// i-preIndex-1 å³é«˜åº¦å¤§äºç­‰äºå½“å‰æŸ±é«˜çš„è¿ç»­æŸ±å­ä¸ªæ•°
				res = max(res, curHeight*(i-preIndex-1))
				preIndex = i
			}
			i++
		}
		res = max(res, curHeight*(len(heights)-1-preIndex))
	}
	return res
}
```

## è§£æ³•äºŒï¼šåˆ†æ²»
æ­¤è§£æ³•æ¥è‡ª [LeetCode é¢˜è§£](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/zhu-zhuang-tu-zhong-zui-da-de-ju-xing-by-leetcode/)ã€‚

æ ¹æ®æœ¨æ¡¶åŸç†ï¼Œä¸€åªæœ¨æ¡¶ç››æ°´çš„å¤šå°‘å–å†³äºæ¡¶å£ä¸Šæœ€çŸ­çš„é‚£å—ã€‚å› æ­¤ï¼Œå¦‚æœé€‰æ‹©æŸä¸ªåŒºé—´å†…çš„**å…¨éƒ¨æŸ±å­**æ„æˆä¸€ä¸ªçŸ©å½¢ï¼Œé‚£ä¹ˆè¿™ä¸ªçŸ©å½¢çš„æœ€å¤§é¢ç§¯å–å†³äºåŒºé—´å†…æœ€çŸ®çš„æŸ±å­ï¼Œå…¶é¢ç§¯ç­‰äº `åŒºé—´å®½åº¦Ã—æœ€çŸ®çš„æŸ±å­é«˜åº¦`ã€‚

å¯¹äºè¿™é“é¢˜ï¼Œå¯ä»¥å…ˆæ‰¾åˆ°æ•´ä¸ªåŒºé—´çš„æœ€çŸ®çš„æŸ±å­ï¼Œè®¡ç®—ä¸Šè¿°çŸ©å½¢é¢ç§¯ï¼Œç„¶åé€’å½’åœ°è®¡ç®—æœ€çŸ®æŸ±å­å·¦å³åŒºé—´çš„çŸ©å½¢é¢ç§¯ã€‚
![15806496589799](/media/15806496589799.jpg)
> å›¾ç‰‡æ¥è‡ªï¼š[LeetCode é¢˜è§£](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/zhu-zhuang-tu-zhong-zui-da-de-ju-xing-by-leetcode/)

æ—¶é—´å¤æ‚åº¦ï¼šå¹³å‡ $O(nlogn)$ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„ä¸­çš„æ•°å­—æ˜¯æœ‰åºçš„ï¼Œå°†é€€åŒ–ä¸º $O(n^2)$ã€‚

ä»£ç ï¼š
```go
func largestRectangleArea(heights []int) int {
	if len(heights) == 0 {
		return 0
	}
	return dfs(heights, 0, len(heights)-1)
}

func dfs(heights []int, start, end int) int {
	if start > end {
		return -1
	}
	if start == end {
		return heights[start]
	}
	minIndex := start
	for i := start + 1; i <= end; i++ {
		if heights[i] < heights[minIndex] {
			minIndex = i
		}
	}
	curMax := (end - start + 1) * heights[minIndex]
	leftMax := dfs(heights, start, minIndex-1)
	rightMax := dfs(heights, minIndex+1, end)
	return max(curMax, max(leftMax, rightMax))
}
```

## è§£æ³•ä¸‰ï¼šåˆ†æ²»+çº¿æ®µæ ‘
æ­¤è§£æ³•æ¥è‡ª [LeetCode é¢˜è§£](https://leetcode.com/problems/largest-rectangle-in-histogram/discuss/28941/segment-tree-solution-just-another-idea-onlogn-solution)ã€‚

è¿™ç§è§£æ³•æ˜¯è§£æ³•äºŒçš„ä¼˜åŒ–ã€‚åœ¨è§£æ³•äºŒä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾æŸä¸ªåŒºé—´çš„æœ€å°å€¼ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ $O(nlogn)$ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„ä¸­çš„æ•°å­—æ˜¯æœ‰åºçš„ï¼Œå°†é€€åŒ–ä¸º $O(n^2)$ã€‚

å¯¹äºåŒºé—´æœ€å€¼çš„æŸ¥è¯¢é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ®µæ ‘æ¥ä¼˜åŒ–ã€‚å¼•å…¥çº¿æ®µæ ‘åï¼Œæ— è®ºåŒºé—´æ•´ä½“æ˜¯å¦æœ‰åºï¼Œéƒ½å¯ä»¥åœ¨ $O(logn)$ çš„æ—¶é—´é‡Œæ‰¾åˆ°æŸæ®µåŒºé—´çš„æœ€å°å€¼ã€‚å…³äºçº¿æ®µæ ‘çš„å®ç°ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘[ä¹‹å‰çš„æ–‡ç« ](https://imageslr.github.io/2020/02/02/segment.html)ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚

ç›¸æ¯”äºè§£æ³•äºŒï¼Œåªéœ€ä¿®æ”¹ä¸€å¤„ä»£ç ï¼š**æŸ¥æ‰¾åŒºé—´æœ€å°å€¼ä¸‹æ ‡ï¼Œä»éå†æŸ¥æ‰¾æ”¹ä¸ºçº¿æ®µæ ‘æŸ¥æ‰¾**ã€‚

æ—¶é—´å¤æ‚åº¦ï¼š$O(nlogn)$ã€‚  
ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œæ˜¯çº¿æ®µæ ‘çš„ç©ºé—´å¼€é”€ã€‚

ä»£ç ï¼š
```go
func largestRectangleArea(heights []int) int {
	if len(heights) == 0 {
		return 0
	}
	root := BuildSegmentTree(heights, 0, len(heights)-1) // 1. æ„å»ºçº¿æ®µæ ‘
	return dfs(root, heights, 0, len(heights)-1)
}

func dfs(sTree *SegmentTreeNode, heights []int, start, end int) int {
	if start > end {
		return -1
	}
	if start == end {
		return heights[start]
	}
	minIndex := sTree.Query(heights, start, end) // 2. ä½¿ç”¨ Query() æ–¹æ³•æŸ¥æ‰¾åŒºé—´æœ€å°å€¼çš„ä¸‹æ ‡
	curMax := (end - start + 1) * heights[minIndex]
	leftMax := dfs(sTree, heights, start, minIndex-1)
	rightMax := dfs(sTree, heights, minIndex+1, end)
	return max(curMax, max(leftMax, rightMax))
}
```

çº¿æ®µæ ‘ä»£ç ï¼š
```go
type SegmentTreeNode struct {
	start int
	end   int
	min   int // æœ¬é¢˜çº¿æ®µæ ‘èŠ‚ç‚¹ä¿å­˜çš„ä¸æ˜¯åŒºé—´æœ€å°å€¼ï¼Œè€Œæ˜¯æœ€å°å€¼æ‰€åœ¨çš„ä¸‹æ ‡
	left  *SegmentTreeNode
	right *SegmentTreeNode
}

func BuildSegmentTree(nums []int, left, right int) *SegmentTreeNode {
	if left > right {
		return nil
	}
	root := &SegmentTreeNode{left, right, left, nil, nil} // æ ¹æ®èŠ‚ç‚¹åŒºé—´çš„å·¦è¾¹ç•Œå€¼åˆå§‹åŒ–
	if left == right {
		return root
	}
	mid := (left + right) / 2
	root.left = BuildSegmentTree(nums, left, mid)
	root.right = BuildSegmentTree(nums, mid+1, right)
	if nums[root.left.min] < nums[root.right.min] {
		root.min = root.left.min
	} else {
		root.min = root.right.min
	}
	return root
}

func (root *SegmentTreeNode) Query(nums []int, start, end int) int {
	if start > root.end || end < root.start {
		return -1
	}
	if start <= root.start && end >= root.end {
		return root.min
	}
	leftMin := root.left.Query(nums, start, end)
	rightMin := root.right.Query(nums, start, end)
	if leftMin < 0 {
		return rightMin
	}
	if rightMin < 0 {
		return leftMin
	}
	if nums[leftMin] < nums[rightMin] {
		return leftMin
	}
	return rightMin
}

func max(a, b int) int {
	if a > b {
		return a
	}
	return b
}
```

## è§£æ³•å››ï¼šæš´åŠ›ï¼ˆéå†ä¸åŒçš„æŸ±å­ï¼‰
é¦–å…ˆæ€è€ƒï¼šåŒ…å«æŸä¸ªæŸ±å­ `i`ã€å¹¶ä¸”ä»¥ `heights[i]` ä¸ºé«˜çš„æœ€å¤§çŸ©å½¢é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ

æ˜¾ç„¶ï¼Œå¯¹äºæ¯ä¸ªæŸ±å­ `i`ï¼Œæˆ‘ä»¬åªéœ€è¦ä»¥è¯¥æŸ±å­ä¸ºä¸­å¿ƒï¼Œå‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ª `left` æ»¡è¶³ `heights[left] < heights[i]`ï¼Œå‘å³æ‰¾åˆ°ç¬¬ä¸€ä¸ª `right` æ»¡è¶³ `heights[right] < heights[i]`ï¼Œ`left` ä¸ `right` ä¹‹é—´å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„çŸ©å½¢ï¼Œå…¶é¢ç§¯ç­‰äº `heights[i] Ã— (right-left-1)`ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»¥æŸ±å­ `i=4` ä¸ºé«˜çš„æœ€å¤§é¢ç§¯çš„çŸ©å½¢ï¼Œå°±æ˜¯çº¢è‰²æ–¹æ¡†æ‰€å›´çš„éƒ¨åˆ†ã€‚å‘å·¦æ‰¾åˆ° `left=1`ï¼Œå‘å³æ‰¾åˆ° `right=6`ï¼ˆæ•°ç»„çš„å³è¾¹ç•Œï¼Œé«˜åº¦å¯ä»¥è§†ä¸º 0ï¼‰ï¼Œæ»¡è¶³ `heights[left], heights[right] < heights[i]`ã€‚
![-w240](/media/15806531441722.jpg)

æˆ‘ä»¬å¯ä»¥éå†æ¯ä¸ªæŸ±å­ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œè¾“å‡ºæœ€å¤§çš„é¢ç§¯ã€‚æ³¨æ„è§£æ³•å››ä¸è§£æ³•ä¸€çš„åŒºåˆ«ï¼šè§£æ³•ä¸€æ˜¯éå†æ¯ä¸ªé«˜åº¦ï¼Œè§£æ³•å››æ˜¯éå†æ¯ä¸ªæŸ±å­ã€‚

æ—¶é—´å¤æ‚åº¦ $O(n^2)$ã€‚  
ç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚

ä»£ç ï¼š
```go
func largestRectangleArea(heights []int) int {
	res := 0
	for i, h := range heights {
		left, right := i, i
		for left > 0 && heights[left-1] >= h {
			left--
		}
		for right < len(heights)-1 && heights[right+1] >= h {
			right++
		}
		res = max(res, h*(right-left+1))
	}
	return res
}
```

## è§£æ³•å››ä¼˜åŒ–ï¼šéå†ä¸åŒçš„æŸ±å­ + åŠ¨æ€è§„åˆ’
è¿™é‡Œé‡‡ç”¨ç±»ä¼¼[42. æ¥é›¨æ°´]({% post_url 2020-02-21-leetcode-42%})çš„è§£æ³•å››çš„æ–¹æ³•ï¼Œä½¿ç”¨ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«è®°å½•ç¬¬ `i` ä¸ªæŸ±å­å·¦ã€å³ç¬¬ä¸€ä¸ªæ¯”å®ƒçŸ®çš„æŸ±å­ä¸‹æ ‡ã€‚æ—¶é—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–ä¸º O(n)ã€‚ä»£ç ç•¥ã€‚

## è§£æ³•äº”ï¼šå•è°ƒæ ˆ
è¿™ç§è§£æ³•ç›¸å½“äºè§£æ³•å››çš„ä¼˜åŒ–ç‰ˆã€‚åœ¨è§£æ³•å››ä¸­ï¼Œå¯¹äºæ¯ä¸ªæŸ±å­ `i`ï¼Œæˆ‘ä»¬éœ€è¦ä»¥è¯¥æŸ±å­ä¸ºä¸­å¿ƒï¼Œå‘å·¦ã€å‘å³åˆ†åˆ«æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”å®ƒçŸ®çš„æŸ±å­ã€‚ä¸€å…±éœ€è¦ $O(n^2)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚

å¼•å…¥å•è°ƒæ ˆå¯ä»¥ä¼˜åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸€è¶Ÿéå†å°±èƒ½æ‰¾åˆ°æ‰€æœ‰æŸ±å­çš„ `left`ã€`right`ã€‚å•è°ƒæ ˆå³æ»¡è¶³å•è°ƒæ€§çš„æ ˆç»“æ„ï¼Œå¦‚æœå½“å‰å…¥æ ˆå…ƒç´ æ¯”æ ˆé¡¶å…ƒç´ å°ï¼Œéœ€è¦å°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ°å½“å‰å…¥æ ˆå…ƒç´ ä¸å°äºæ ˆé¡¶å…ƒç´ ã€‚

å¯¹äºè¿™é“é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨å•è°ƒæ ˆä¿å­˜**å…ƒç´ çš„ä¸‹æ ‡**ï¼Œä»å·¦åˆ°å³éå†æ‰€æœ‰å…ƒç´ ï¼Œå¹¶ç»´æŠ¤å•è°ƒæ ˆã€‚

åœ¨è§£æ³•å››çš„æ€è·¯çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è®¾æ ˆé¡¶å…ƒç´  `stack[top]` å°±æ˜¯æŸ±å­ `i`ï¼Œé‚£ä¹ˆ `stack[top-1]` å°±æ˜¯æŸ±å­ `i` å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒçŸ®çš„æŸ±å­çš„ä¸‹æ ‡ï¼Œè®°ä¸º `left`ã€‚å¦‚æœå½“å‰éå†çš„å…ƒç´  `j` çš„é«˜åº¦å°äºæ ˆé¡¶å…ƒç´ çš„é«˜åº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ‰¾åˆ°äº†æŸ±å­ `i` å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒçŸ®çš„æŸ±å­çš„ä¸‹æ ‡ï¼Œè®°ä¸º `right`ã€‚æ ¹æ® `left` å’Œ `right`ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºåŒ…å«æŸ±å­ `i` çš„æœ€å¤§çŸ©å½¢çš„é¢ç§¯ï¼š
```go
heights[i] Ã— (right-left-1) // å…¶ä¸­ i=stack[top], left=stack[top-1], right=j
```

**ç®—æ³•çš„æµç¨‹**ï¼šå¦‚æœå½“å‰éå†å…ƒç´ çš„é«˜åº¦å¤§äºç­‰äºæ ˆé¡¶å…ƒç´ çš„é«˜åº¦ï¼Œå°±å°†å½“å‰ä¸‹æ ‡å…¥æ ˆï¼›å¦åˆ™ï¼Œä¸æ–­å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼ŒåŒæ—¶æ ¹æ®ä¸Šè¿°å…¬å¼è®¡ç®—çŸ©å½¢çš„é¢ç§¯ï¼Œç›´åˆ°å½“å‰éå†çš„å…ƒç´ çš„é«˜åº¦ä¸å°äºæ ˆé¡¶å…ƒç´ çš„é«˜åº¦ï¼Œå°†å½“å‰ä¸‹æ ‡å…¥æ ˆã€‚

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬**å…ˆåœ¨æ•°ç»„é¦–å°¾æ’å…¥ `0`**ï¼Œè¡¨ç¤ºæ•°ç»„å·¦å³è¾¹ç•Œå¤–ä¾§çš„é«˜åº¦ä¸º 0ï¼Œç„¶å**å°†ä¸‹æ ‡ `0` å…¥æ ˆï¼Œä»ä¸‹æ ‡ `1` å¼€å§‹éå†**ã€‚è¿™æ ·æ‰€æœ‰è¾¹ç•Œæƒ…å†µéƒ½å¯ä»¥ç»Ÿä¸€å¤„ç†ã€‚

ä»¥ `[2, 1, 5, 6, 2, 3]` ä¸ºä¾‹ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

1. åˆå§‹åŒ–ï¼š  
![](/media/15807110336821.jpg)
2. å¼€å§‹éå†ã€‚`heights[1] > heights[stack[top]=0]`ï¼Œå…¥æ ˆï¼š  
![-w219](/media/15807110784336.jpg)
3. `heights[2] < heights[1]`ï¼Œå‡ºæ ˆï¼Œè®¡ç®—çº¢è‰²éƒ¨åˆ†é¢ç§¯ï¼Œç„¶å `i=2` å…¥æ ˆã€‚å¯ä»¥çœ‹åˆ°ï¼Œ**çº¢è‰²éƒ¨åˆ†æ­£å¥½ä½äºæ ˆé¡¶ä¸‹ä¸€ä¸ªå…ƒç´ ä¸å½“å‰éå†å…ƒç´ ä¹‹é—´ï¼Œä¸‹åŒ**ï¼š  
![-w258](/media/15807152549905.jpg)
4. `i=3`ã€`i=4` ä¾æ¬¡å…¥æ ˆï¼š  
![-w230](/media/15807113127043.jpg)
5. `heights[5] < heights[4]`ï¼Œå‡ºæ ˆï¼Œè®¡ç®—çº¢è‰²éƒ¨åˆ†é¢ç§¯ï¼š  
![-w230](/media/15807114695250.jpg)
6. `heights[5] < heights[3]`ï¼Œå‡ºæ ˆï¼Œè®¡ç®—çº¢è‰²éƒ¨åˆ†é¢ç§¯ï¼Œç„¶å `i=5` å…¥æ ˆï¼š  
![-w295](/media/15807122354695.jpg)
7. `heights[6] < heights[5]`ï¼Œå‡ºæ ˆï¼Œè®¡ç®—çº¢è‰²éƒ¨åˆ†é¢ç§¯ï¼š  
![-w277](/media/15807118721930.jpg)
8. `i=6` å…¥æ ˆï¼š  
![-w270](/media/15807119433945.jpg)
9. `heights[7] < heights[6]`ï¼Œå‡ºæ ˆï¼Œè®¡ç®—çº¢è‰²éƒ¨åˆ†é¢ç§¯ï¼š  
![-w259](/media/15807120514165.jpg)
10. `heights[7] < heights[2]`ï¼Œå‡ºæ ˆï¼Œè®¡ç®—çº¢è‰²éƒ¨åˆ†é¢ç§¯ï¼š  
![-w238](/media/15807121712570.jpg)
11. éå†ç»“æŸï¼Œè¾“å‡ºè®¡ç®—è¿‡çš„æœ€å¤§é¢ç§¯

æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œä»…éœ€ä¸€è¶Ÿéå†ã€‚è¿™ç§è§£æ³•æ‰“è´¥äº† 100% çš„ golang æäº¤ã€‚  
ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚

ä»£ç ï¼š
```go
func largestRectangleArea(heights []int) int {
	res := 0
	heights = append([]int{0}, heights...)
	heights = append(heights, 0) // é¦–å°¾æ·»åŠ  0
	stack := NewStack()
	stack.Push(0)                       // ä¸‹æ ‡ 0 å…¥æ ˆ
	for i := 1; i < len(heights); i++ { // ä» 1 å¼€å§‹éå†
		for heights[i] < heights[stack.Top()] {
			h := heights[stack.Pop()]
			left, right := stack.Top(), i
			res = max(res, h*(right-left-1))
		}
		stack.Push(i)
	}
	return res
}

// ä»¥ä¸‹æ˜¯æ ˆçš„æ¨¡æ¿ä»£ç 

type ElementType = int
type Stack struct {
	s []ElementType
}

func NewStack() *Stack {
	return &Stack{
		s: make([]ElementType, 0),
	}
}

func (s *Stack) Empty() bool {
	return len(s.s) == 0
}

func (s *Stack) Top() ElementType {
	if s.Empty() {
		return 0
	}
	return s.s[len(s.s)-1]
}

func (s *Stack) Pop() ElementType {
	if s.Empty() {
		return 0
	}
	t := s.s[len(s.s)-1]
	s.s = s.s[:len(s.s)-1]
	return t
}

func (s *Stack) Push(v ElementType) {
	s.s = append(s.s, v)
}
```



## æ€»ç»“
æœ¬æ–‡æä¾›äº† 3 ç§æ€è·¯ï¼Œ5 ç§è§£æ³•ï¼Œä»æœ€ç®€å•çš„æš´åŠ›æ³•å¼€å§‹ï¼Œä¸æ–­ä¼˜åŒ–é™ä½æ—¶é—´å¤æ‚åº¦ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æ˜¯ç›¸åŒçš„æ€è·¯ï¼Œé‡‡ç”¨ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œä¹Ÿä¼šæœ‰ä¸åŒçš„æ•ˆç‡ã€‚æœ¬é¢˜æ¶‰åŠåˆ†æ²»æ³•ã€çº¿æ®µæ ‘ã€å•è°ƒæ ˆçš„åº”ç”¨ï¼Œå€¼å¾—å›å‘³ã€‚

æœ¬æ–‡å‘è¡¨åœ¨æˆ‘çš„åšå®¢ [https://imageslr.github.io/](https://imageslr.github.io/)ã€‚æˆ‘ä¹Ÿä¼šåˆ†äº«æ›´å¤šçš„é¢˜è§£ï¼Œä¸€èµ·äº¤æµï¼Œå…±åŒè¿›æ­¥ï¼
